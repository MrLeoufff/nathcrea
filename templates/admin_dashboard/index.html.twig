{% extends 'base.html.twig' %}

{% block title %}Tableau de bord administrateur
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<h1 class="text-center mb-4">Tableau de bord administrateur</h1>

		<!-- Section Utilisateurs -->
		<section class="mb-4">
			<h2 class="h4">Utilisateurs</h2>
			<ul class="list-group">
				{% for user in users %}
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>{{ user.email }}</span>
						<span class="badge bg-primary text-light ms-2">{{ user.roles|join(', ') }}</span>
					</li>
				{% endfor %}
			</ul>
		</section>

		<!-- Section Catégories -->
		<section class="mb-4">
			<h2 class="h4">Catégories</h2>
			<ul class="list-group">
				{% for category in categories %}
					<li class="list-group-item">{{ category.name }}</li>
				{% endfor %}
			</ul>
		</section>

		<!-- Section Produits -->
		<section class="mb-4">
			<h2 class="h4">Produits</h2>
			<ul class="list-group">
				{% for product in products %}
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>{{ product.name }}</span>
						<span class="badge bg-success ms-2">{{ product.price }}
							€</span>
					</li>
				{% endfor %}
			</ul>
		</section>

		<!-- Section Commandes -->
		<section>
			<h2 class="h4">Commandes</h2>
			<div class="table-responsive">
				<table class="table table-bordered table-hover">
					<thead class="table-dark">
						<tr>
							<th>ID</th>
							<th>Numéro de commande</th>
							<th>Statut</th>
							<th>Montant total</th>
							<th>Créé le</th>
						</tr>
					</thead>
					<tbody>
						{% for order in orders %}
							<tr>
								<td>{{ order.id }}</td>
								<td>{{ order.orderNumber }}</td>
								<td>
									<span class="badge {% if order.status == 'COMPLETED' %}bg-success{% else %}bg-warning text-dark{% endif %}">
										{{ order.status }}
									</span>
								</td>
								<td>{{ order.totalAmount }}
									€</td>
								<td>{{ order.createdAt|date('d/m/Y H:i') }}</td>
								<td>
									<a href="{{ path('admin_order_details', { id: order.id }) }}" class="btn btn-primary btn-sm">
										Voir détails
									</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="5" class="text-center">Aucune commande trouvée</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</section>
	</div>
{% endblock %}
